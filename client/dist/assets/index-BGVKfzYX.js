import{a3 as y,W as S,V as U,U as C,Q as E,af as F,X as T,b as h,a6 as $,ac as f,O as t,a5 as k,ad as d,H as W,y as g,ae as N,Z as A}from"./index-CZBkQvc6.js";const B=async i=>{try{const s=await y.get(`/employee/getEmployee/${i}`);if(s.status!==200)throw new Error(request.statusText);const{data:c}=s==null?void 0:s.data;if(c)return c}catch{return!1}},V=async(i,s,c)=>{var u,x;try{const l=await y.put(`employee/updateEmployee/${i}`,s),{data:n}=l==null?void 0:l.data;if(n)return!0;console.log("response",l)}catch(l){const n=((x=(u=l==null?void 0:l.response)==null?void 0:u.data)==null?void 0:x.message)||l.message;return c(n),!1}},{Title:D}=C,{Option:j}=E,M=i=>{const{employeeId:s}=F(),c=T(),[u,x]=h.useState(null),l=$({firstName:f().required("First name is required"),lastName:f().required("Last name is required"),email:f().email("Invalid email format").required("Email is required"),role:f().nullable()}),n={labelCol:{span:24},wrapperCol:{span:24}},v=async()=>{i.setLoading(!0);try{const e=await B(s);if(e){const a=e;console.log("emp",a);const m=(a==null?void 0:a.userName.split(" ")[0])||"",p=(a==null?void 0:a.userName.split(" ")[1])||"";x({firstName:m||"",lastName:p||"",email:(a==null?void 0:a.email)||"",role:(a==null?void 0:a.role)||""})}}catch{}finally{i.setLoading(!1)}},I=async e=>{i.setLoading(!0);const a={userName:`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`,email:e==null?void 0:e.email,role:e==null?void 0:e.role};await V(s,a,w)&&(c(-1),i.success("Employee Record Updated")),i.setLoading(!1)},w=e=>{i.error(e)};return h.useEffect(()=>{v()},[s]),u?t.jsx("div",{style:{padding:"30px 50px"},children:t.jsxs("div",{style:{background:"#f1f1f1",padding:"30px 40px",borderRadius:"8px",maxWidth:1e3,margin:"0 auto"},children:[t.jsx(D,{level:3,style:{textAlign:"center",background:"#e0e0e0",padding:"10px",color:"#0a3a66",textTransform:"uppercase",borderRadius:"4px"},children:"Update Employee Details"}),t.jsx(k,{initialValues:u,enableReinitialize:!0,validationSchema:l,onSubmit:async(e,{setSubmitting:a})=>{a(!0),await I(e),a(!1)},children:({handleSubmit:e,handleChange:a,handleBlur:m,values:p,touched:r,errors:o,setFieldValue:L,isSubmitting:q})=>t.jsxs(d,{layout:"vertical",onFinish:e,style:{marginTop:"30px"},children:[t.jsxs(W,{gutter:20,children:[t.jsx(g,{span:12,children:t.jsx(d.Item,{label:"First Name",validateStatus:r.firstName&&o.firstName?"error":"",help:r.firstName&&o.firstName,...n,children:t.jsx(N,{name:"firstName",value:p.firstName,onChange:a,onBlur:m})})}),t.jsx(g,{span:12,children:t.jsx(d.Item,{label:"Last Name",validateStatus:r.lastName&&o.lastName?"error":"",help:r.lastName&&o.lastName,...n,children:t.jsx(N,{name:"lastName",value:p.lastName,onChange:a,onBlur:m})})}),t.jsx(g,{span:12,children:t.jsx(d.Item,{label:"Email",validateStatus:r.email&&o.email?"error":"",help:r.email&&o.email,...n,children:t.jsx(N,{name:"email",value:p.email,onChange:a,onBlur:m})})}),t.jsx(g,{span:12,children:t.jsx(d.Item,{label:"Role",validateStatus:r.role&&o.role?"error":"",help:r.role&&o.role,...n,children:t.jsxs(E,{name:"role",value:p.role,onChange:R=>L("role",R),onBlur:m,children:[t.jsx(j,{value:"employee",children:"Employee"}),t.jsx(j,{value:"admin",children:"Admin"})]})})})]}),t.jsx("div",{style:{textAlign:"center"},children:t.jsx(A,{type:"primary",htmlType:"submit",style:{padding:"6px 30px",backgroundColor:"#0070a4"},children:q?"Updating...":"Update Employee"})})]})})]})}):null},z=S(U(M));export{z as default};
