import{Z as M,$ as D,W as p,L as P,b as h,Q as b,M as i,a6 as x,T as k,a7 as I,U as Y,a8 as w}from"./index-znB1vN3e.js";import{h as m}from"./moment-C5S46NFB.js";import{F as S}from"./Table-CorIOHko.js";import"./index-B05hSFld.js";import"./Pagination-FDhaRXMK.js";const j=async(n,g,o)=>{var l,a,d;try{const t=await M.get(`/medicine/getMedicines?search=${o}`),{data:{data:u},request:c}=t;if(c.status!==200)throw new Error(c.statusText);if(u){const y={tableData:u,currentPage:(l=t==null?void 0:t.data)==null?void 0:l.page,totalPages:(a=t==null?void 0:t.data)==null?void 0:a.totalPages,limit:(d=t==null?void 0:t.data)==null?void 0:d.limit};n(y)}return!0}catch(t){return g(t==null?void 0:t.message),!1}},{Title:v}=k,{Content:C}=x,_=n=>{const g=P(e=>e.theme),[o,l]=h.useState(""),[a,d]=h.useState({tableData:[],currentPage:1,totalPages:0}),t=[{title:"Medicine ID",dataIndex:"_id",key:"id"},{title:"Medicine Name",dataIndex:"Med_Name",key:"name"},{title:"Quantity Available",dataIndex:"Med_Qty",key:"quantity"},{title:"Price",dataIndex:"Med_Price",key:"price"},{title:"Purchase Date",dataIndex:"Purchase_Date",key:"price",render:(e,s)=>w(s.createdAt).format("DD MMM YYYY, hh:mm A")},{title:"Mfg Date",dataIndex:"Manufacture_Date",key:"price",render:e=>e?m(e).format("DD-MM-YYYY"):"-"},{title:"Exp Date",dataIndex:"Expiry_Date",key:"price",render:e=>e?m(e).format("DD-MM-YYYY"):"-"}],u=async()=>{await c()},c=async()=>{n.setLoading(!0);try{await j(y,f,o)||n.error("Could not fetch medicines")}catch{n.error("Somethint Went Wrong")}finally{n.setLoading(!1)}},y=e=>{console.log("dttttos",e),d(s=>({...s,tableData:e==null?void 0:e.tableData,currentPage:e==null?void 0:e.currentPage,totalPages:e==null?void 0:e.totalPages}))},f=e=>{n.error(e)};h.useEffect(()=>{(async()=>await c())()},[]),console.log("data",a);const r=b[g.currentTheme].token;return console.log("app",r),i.jsx(x,{style:{padding:"24px",minHeight:"100vh",background:r.colorBgBase},children:i.jsxs(C,{style:{maxWidth:1100,padding:24},children:[i.jsx(v,{level:3,style:{textAlign:"center",backgroundColor:r==null?void 0:r.colorBgContainer,padding:"10px",color:r==null?void 0:r.colorPrimary,textTransform:"uppercase",borderRadius:4},children:"Medicine Inventory"}),i.jsxs("div",{style:{display:"flex",justifyContent:"center",margin:"20px 0"},children:[i.jsx(I,{placeholder:"Enter any value to Search",value:o,onChange:e=>l(e.target.value),style:{width:300,marginRight:10}}),i.jsx(Y,{type:"primary",onClick:u,children:"Submit"})]}),i.jsx(S,{dataSource:a==null?void 0:a.tableData,columns:t,bordered:!0,pagination:{pageSize:10,current:a==null?void 0:a.currentPage,total:a==null?void 0:a.totalPages},rowClassName:(e,s)=>s%2===0?"table-row-light":"table-row-dark"})]})})},B=D(p(_));export{B as default};
