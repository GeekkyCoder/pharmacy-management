import{Z as g,$ as w,W as I,an as q,O as T,b as y,a1 as U,a9 as p,M as e,T as C,a4 as R,aa as d,F as k,y as u,a7 as h,U as $}from"./index-C7YdiJGM.js";import{h as M}from"./moment-C5S46NFB.js";import{S as f}from"./index-CVEjP0KC.js";const O=async n=>{try{const s=await g.get(`/employee/getEmployee/${n}`);if(s.status!==200)throw new Error(request.statusText);const{data:o}=s==null?void 0:s.data;if(o)return o}catch{return!1}},W=async(n,s,o)=>{try{const t=await g.put(`employee/updateEmployee/${n}`,s);if(t.status!==201)throw new Error(t.statusText);const{data:E}=t==null?void 0:t.data;if(E)return!0;console.log("response",t)}catch(t){return o(t==null?void 0:t.message),!1}},{Title:B}=C,{Option:_}=f,J=n=>{const{employeeId:s}=q(),o=T(),[t,E]=y.useState(null),j=U({E_Fname:p().required("First name is required"),E_Lname:p().required("Last name is required"),E_Sex:p().required("Sex is required"),E_Phno:p().required("Phone is required")}),m={labelCol:{span:24},wrapperCol:{span:24}},S=async()=>{n.setLoading(!0);const l=await O(s);if(l){const a=l;E({E_Fname:a.E_Fname||"",E_Lname:a.E_Lname||"",E_Sex:a.E_Sex||"",E_Phno:a.E_Phno||"",E_Jdate:a.E_Jdate?M(a.E_Jdate):null})}else n.error("Failed to load employee details.");n.setLoading(!1)},F=async l=>{n.setLoading(!0),await W(s,l,L)&&(o(-1),n.success("Employee Record Updated")),n.setLoading(!1)},L=l=>{n.error(l)};return y.useEffect(()=>{S()},[s]),t?e.jsx("div",{style:{padding:"30px 50px"},children:e.jsxs("div",{style:{background:"#f1f1f1",padding:"30px 40px",borderRadius:"8px",maxWidth:1e3,margin:"0 auto"},children:[e.jsx(B,{level:3,style:{textAlign:"center",background:"#e0e0e0",padding:"10px",color:"#0a3a66",textTransform:"uppercase",borderRadius:"4px"},children:"Update Employee Details"}),e.jsx(R,{initialValues:t,enableReinitialize:!0,validationSchema:j,onSubmit:async(l,{setSubmitting:a})=>{a(!0),await F(l),a(!1)},children:({handleSubmit:l,handleChange:a,handleBlur:c,values:x,touched:r,errors:i,setFieldValue:v,isSubmitting:b})=>e.jsxs(d,{layout:"vertical",onFinish:l,style:{marginTop:"30px"},children:[e.jsxs(k,{gutter:20,children:[e.jsx(u,{span:12,children:e.jsx(d.Item,{label:"First Name",validateStatus:r.E_Fname&&i.E_Fname?"error":"",help:r.E_Fname&&i.E_Fname,...m,children:e.jsx(h,{name:"E_Fname",value:x.E_Fname,onChange:a,onBlur:c})})}),e.jsx(u,{span:12,children:e.jsx(d.Item,{label:"Last Name",validateStatus:r.E_Lname&&i.E_Lname?"error":"",help:r.E_Lname&&i.E_Lname,...m,children:e.jsx(h,{name:"E_Lname",value:x.E_Lname,onChange:a,onBlur:c})})}),e.jsx(u,{span:12,children:e.jsx(d.Item,{label:"Sex",validateStatus:r.E_Sex&&i.E_Sex?"error":"",help:r.E_Sex&&i.E_Sex,...m,children:e.jsxs(f,{name:"E_Sex",value:x.E_Sex,onChange:P=>v("E_Sex",P),onBlur:c,children:[e.jsx(_,{value:"Male",children:"Male"}),e.jsx(_,{value:"Female",children:"Female"}),e.jsx(_,{value:"Other",children:"Other"})]})})}),e.jsx(u,{span:12,children:e.jsx(d.Item,{label:"Phone",validateStatus:r.E_Phno&&i.E_Phno?"error":"",help:r.E_Phno&&i.E_Phno,...m,children:e.jsx(h,{name:"E_Phno",value:x.E_Phno,onChange:a,onBlur:c})})})]}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx($,{type:"primary",htmlType:"submit",style:{padding:"6px 30px",backgroundColor:"#0070a4"},children:b?"Updating...":"Update Employee"})})]})})]})}):null},V=w(I(J));export{V as default};
