import{b as s,M as t,T as M,a7 as j,a8 as N,Z as k}from"./index-DG3p3Wrs.js";import{S as w,F as l}from"./Table-Ny8rxMYY.js";import"./index-C1MpP-Ec.js";import"./Pagination-Dmi1AS1R.js";const{Title:D}=M,{Search:A}=j,T=()=>{const[m,y]=s.useState([]),[r,I]=s.useState({current:1,pageSize:10,total:0}),[p,i]=s.useState(!1),[c,u]=s.useState(""),o=async(e=1,a=10,d="")=>{i(!0);try{const n=await k.get("/invoice/getAllInvoices",{params:{page:e,limit:a,search:d}}),{data:S,total:_,page:v,limit:C}=n.data;y(S),I({current:v,pageSize:C,total:_})}catch(n){console.error("Error fetching invoices:",n)}finally{i(!1)}};s.useEffect(()=>{o(r.current,r.pageSize,c)},[]);const x=e=>{o(e.current,e.pageSize,c)},h=e=>{u(e),o(1,r.pageSize,e)},f=[{title:"Invoice ID",dataIndex:"invoiceId",key:"invoiceId"},{title:"Customer Name",dataIndex:"C_Name",key:"C_Name"},{title:"Customer ID",dataIndex:"C_ID",key:"C_ID"},{title:"No. of Items",dataIndex:"No_Of_Items",key:"No_Of_Items"},{title:"Sale Performed By",dataIndex:["employee"],key:"employee",render:e=>e?`${e.E_Username}`:"N/A"},{title:"Invoice Date",dataIndex:"createdAt",key:"createdAt",render:(e,a)=>N(a.createdAt).format("DD MMM YYYY, hh:mm A")}],g=e=>{const a=[{title:"Medicine Name",dataIndex:"Med_Name",key:"Med_Name"},{title:"Quantity",dataIndex:"Med_Qty",key:"Med_Qty"},{title:"Price",dataIndex:"Med_Price",key:"Med_Price"}];return t.jsx(l,{columns:a,dataSource:e.items,rowKey:(d,n)=>n,pagination:!1})};return t.jsxs("div",{style:{padding:"24px"},children:[t.jsx(D,{level:3,children:"Invoices"}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:t.jsx(w,{style:{marginBottom:16},children:t.jsx(A,{placeholder:"Search by customer name",allowClear:!0,enterButton:!0,onSearch:h})})}),t.jsx(l,{columns:f,dataSource:m,rowKey:"_id",expandable:{expandedRowRender:g},pagination:r,loading:p,onChange:x})]})};export{T as default};
