import{a3 as x,W as h,V as E,U as j,X as M,b as u,O as l,a9 as S,Z as y}from"./index-CZBkQvc6.js";import{P as v}from"./index-DOMLe4Ku.js";import"./ActionButton-BekEfBYN.js";const p=async(t,n)=>{var r,c,i,d;try{const a=await x.get("employee/getEmployees");if(a.status===200){const e=(r=a.data)==null?void 0:r.data;if(e&&Array.isArray(e))return t(e),{success:!0,data:e,message:"Employees fetched successfully"};{const s="No employees data received";return n(s),{success:!1,message:s}}}else{const e=((c=a.data)==null?void 0:c.message)||"Failed to fetch employees";return n(e),{success:!1,message:e}}}catch(a){let e=((d=(i=a==null?void 0:a.response)==null?void 0:i.data)==null?void 0:d.message)||a.message;return n(e),{success:!1,message:e}}},w=async(t,n,r)=>{var c,i,d,a;try{if(!t){const s="Employee ID is required";return r(s),{success:!1,message:s}}const e=await x.delete(`employee/deleteEmployee/${t}`);if(e.status===200){const s=((c=e.data)==null?void 0:c.message)||"Employee deleted successfully";return n(s),{success:!0,message:s}}else{const s=((i=e.data)==null?void 0:i.message)||"Failed to delete employee";return r(s),{success:!1,message:s}}}catch(e){let s=((a=(d=e==null?void 0:e.response)==null?void 0:d.data)==null?void 0:a.message)||e.message;return r(s),{success:!1,message:s}}},{Title:b}=j,D=t=>{const n=M(),[r,c]=u.useState([]),i=o=>{t.success(o)},d=o=>{t.error(o)},a=async o=>{await w(o,i,d)&&(t.setLoading(!0),await p(s,m),t.setLoading(!1))},e=async o=>{try{n(`/update-employee/${o}`)}catch(g){console.log(g)}},s=o=>{c(o)},m=o=>{t.error(JSON.stringify(o))},f=[{title:"Employee",dataIndex:"userName"},{title:"Email",dataIndex:"email"},{title:"Role",dataIndex:"role"},{title:"Actions",render:(o,g)=>l.jsxs("div",{style:{display:"flex",gap:"10px"},children:[l.jsx(y,{type:"primary",onClick:()=>e(g._id),style:{flex:1},children:"Edit"}),l.jsx(v,{title:"Sure to delete?",onConfirm:()=>a(g._id),children:l.jsx(y,{type:"dashed",style:{flex:1,backgroundColor:"red",color:"white"},children:"Delete"})})]})}];return u.useEffect(()=>{(async()=>(t.setLoading(!0),await p(s,m),t.setLoading(!1)))()},[]),l.jsx("div",{style:{padding:"30px 50px"},children:l.jsxs("div",{style:{padding:"30px 40px",borderRadius:"8px"},children:[l.jsx(b,{level:3,style:{textAlign:"center",background:"#e0e0e0",padding:"10px",color:"#0a3a66",textTransform:"uppercase",borderRadius:"4px"},children:"Manage Employees"}),l.jsx(S,{columns:f,dataSource:r,loading:t.loading,style:{marginTop:"30px"},pagination:{pageSize:5}})]})})},I=h(E(D));export{I as default};
