import{a3 as y,W as h,V as N,U as j,N as w,a6 as E,ac as p,O as s,a5 as C,ad as c,H as v,y as u,ae as g,Z as P}from"./index-CZBkQvc6.js";const R=async i=>{var m,o,d,r,l;try{const e=await y.post("/employee/signupEmployee",i);return e.status===201||e.status===200?{success:!0,data:(m=e.data)==null?void 0:m.data,message:((o=e.data)==null?void 0:o.message)||"Employee created successfully",responseCode:"00"}:{success:!1,message:((d=e.data)==null?void 0:d.message)||"Failed to create employee",responseCode:e.status.toString()}}catch(e){if(console.error("Error creating employee:",e),e.response){const a=e.response.status,t=((r=e.response.data)==null?void 0:r.message)||((l=e.response.data)==null?void 0:l.error);switch(a){case 400:return{success:!1,message:t||"Invalid employee data provided",responseCode:"400"};case 401:return{success:!1,message:"Unauthorized. Please login again",responseCode:"401"};case 403:return{success:!1,message:"You don't have permission to create employees",responseCode:"403"};case 409:return{success:!1,message:t||"Employee with this email already exists",responseCode:"409"};case 422:return{success:!1,message:t||"Validation failed. Please check your input",responseCode:"422"};case 500:return{success:!1,message:"Server error. Please try again later",responseCode:"500"};default:return{success:!1,message:t||`Server error (${a}). Please try again`,responseCode:a.toString()}}}else return e.request?{success:!1,message:"Network error. Please check your internet connection",responseCode:"NETWORK_ERROR"}:{success:!1,message:"An unexpected error occurred. Please try again",responseCode:"UNKNOWN_ERROR"}}},{Title:q}=j,F=i=>{w(r=>r.auth.user);const m=E({firstName:p().min(2,"First name must be at least 2 characters").required("First name is required"),lastName:p().min(2,"Last name must be at least 2 characters").required("Last name is required"),email:p().email("Invalid email format").required("Email is required"),password:p().min(6,"Password must be at least 6 characters").required("Password is required")}),o={labelCol:{span:24},wrapperCol:{span:24}},d=async(r,l)=>{i.setLoading(!0);const e={userName:`${r==null?void 0:r.firstName} ${r==null?void 0:r.lastName}`,...r};try{const a=await R(e);a!=null&&a.success?(i.success(a.message),l()):i.error((a==null?void 0:a.message)||"Failed to create employee")}catch(a){console.error("Error in submitCreateEmployee:",a),i.error("An unexpected error occurred. Please try again.")}finally{i.setLoading(!1)}};return s.jsx("div",{style:{padding:"30px 50px"},children:s.jsxs("div",{style:{background:"#f1f1f1",padding:"30px 40px",borderRadius:"8px",maxWidth:1e3,margin:"0 auto"},children:[s.jsx(q,{level:3,style:{textAlign:"center",background:"#e0e0e0",padding:"10px",color:"#0a3a66",textTransform:"uppercase",borderRadius:"4px"},children:"Add Employee Details"}),s.jsx(C,{initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:m,onSubmit:async(r,{resetForm:l,setSubmitting:e})=>{e(!0),await d(r,l),e(!1)},children:({handleSubmit:r,handleChange:l,handleBlur:e,values:a,touched:t,errors:n,setFieldValue:I,isSubmitting:x,dirty:f})=>s.jsxs(c,{layout:"vertical",onFinish:r,style:{marginTop:"30px"},children:[s.jsxs(v,{gutter:20,children:[s.jsx(u,{span:12,children:s.jsx(c.Item,{label:"First Name",validateStatus:t.firstName&&n.firstName?"error":"",help:t.firstName&&n.firstName,...o,children:s.jsx(g,{name:"firstName",value:a.firstName,onChange:l,onBlur:e,placeholder:"Enter first name"})})}),s.jsx(u,{span:12,children:s.jsx(c.Item,{label:"Last Name",validateStatus:t.lastName&&n.lastName?"error":"",help:t.lastName&&n.lastName,...o,children:s.jsx(g,{name:"lastName",value:a.lastName,onChange:l,onBlur:e,placeholder:"Enter last name"})})}),s.jsx(u,{span:12,children:s.jsx(c.Item,{label:"Email",validateStatus:t.email&&n.email?"error":"",help:t.email&&n.email,...o,children:s.jsx(g,{name:"email",type:"email",value:a.email,onChange:l,onBlur:e,placeholder:"Enter email address"})})}),s.jsx(u,{span:12,children:s.jsx(c.Item,{label:"Password",validateStatus:t.password&&n.password?"error":"",help:t.password&&n.password,...o,children:s.jsx(g.Password,{name:"password",value:a.password,onChange:l,onBlur:e,placeholder:"Enter password"})})})]}),s.jsx("div",{style:{textAlign:"center"},children:s.jsx(P,{type:"primary",disabled:!f||x,htmlType:"submit",style:{padding:"6px 30px",backgroundColor:"#0070a4"},children:x?"Loading...":"Add Employee"})})]})})]})})},L=h(N(F));export{L as default};
